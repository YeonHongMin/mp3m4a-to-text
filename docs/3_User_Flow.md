# 🔄 User Flow - 사용자 흐름도
## MP3 to Text Converter

---

## 1. 전체 사용자 여정

```mermaid
journey
    title MP3 to Text 변환 여정
    section 시작
      오디오 파일 준비: 5: User
      도구 선택 (CLI/GUI): 3: User
    section 변환
      파일 업로드/선택: 4: User
      설정 조정: 3: User
      변환 시작: 5: User
      진행 상황 확인: 4: User
    section 완료
      결과 확인: 5: User
      파일 저장/복사: 4: User
```

---

## 2. CLI 사용자 흐름

```mermaid
flowchart TD
    A[시작] --> B{오디오 파일 있음?}
    B -->|예| C[명령어 입력]
    B -->|아니오| Z[종료]
    
    C --> D{옵션 선택}
    D --> E[기본 변환<br/>python mp3_to_text.py audio.mp3]
    D --> F[듀얼 출력<br/>--dual]
    D --> G[VAD 비활성화<br/>--no-vad]
    
    E --> H[모델 로딩]
    F --> H
    G --> H
    
    H --> I[변환 진행]
    I --> J{완료?}
    J -->|진행중| K[실시간 진행률 표시]
    K --> I
    J -->|완료| L[결과 파일 생성]
    J -->|중단 Ctrl+C| M[현재까지 저장]
    
    L --> N[결과 확인]
    M --> N
    N --> Z
```

### 2.1 CLI 명령어 예시

```bash
# 1. 기본 변환 (콘솔 출력)
python src/mp3_to_text.py audio.mp3

# 2. 파일로 저장
python src/mp3_to_text.py audio.mp3 -o result.txt

# 3. 듀얼 출력 (시간별 + 전체)
python src/mp3_to_text.py audio.mp3 --dual

# 4. VAD 비활성화 (배경음악 있는 경우)
python src/mp3_to_text.py audio.mp3 --dual --no-vad

# 5. 디렉터리 일괄 처리
python src/mp3_to_text.py --dir ./mp3
```

---

## 3. GUI 사용자 흐름

```mermaid
flowchart TD
    A[브라우저에서<br/>localhost:7860 접속] --> B[파일 업로드]
    B --> C{설정 조정}
    
    C --> D[모델 선택<br/>small/medium/large-v3]
    C --> E[언어 선택<br/>ko/en/ja/...]
    C --> F[VAD 토글]
    
    D --> G[변환 버튼 클릭]
    E --> G
    F --> G
    
    G --> H[진행률 표시]
    H --> I{완료?}
    I -->|진행중| H
    I -->|완료| J[결과 텍스트 표시]
    
    J --> K{저장?}
    K -->|예| L[파일로 저장 버튼]
    K -->|아니오| M[복사하여 사용]
    
    L --> N[저장 완료 메시지]
    M --> N
    N --> O{추가 변환?}
    O -->|예| B
    O -->|아니오| P[종료]
```

### 3.1 GUI 화면 구성

```
┌─────────────────────────────────────────────────────────────────────┐
│ 🎤 MP3 → 텍스트 변환기                                              │
├───────────────────────────┬─────────────────────────────────────────┤
│                           │                                          │
│  📁 파일 업로드           │  📝 변환 결과                            │
│  ┌─────────────────────┐  │  ┌────────────────────────────────────┐ │
│  │ [audio.mp3 ▼]       │  │  │                                    │ │
│  └─────────────────────┘  │  │  FM영화음악 정은임입니다.          │ │
│                           │  │  오늘 첫 번째 곡은...              │ │
│  ⚙️ 설정                  │  │                                    │ │
│  모델: [large-v3 ▼]       │  │                                    │ │
│  언어: [ko ▼]             │  │                                    │ │
│  ☑ VAD 활성화             │  │                                    │ │
│                           │  │                                    │ │
│  [🎯 변환 시작]           │  └────────────────────────────────────┘ │
│                           │                                          │
│  ⏳ 진행 상황             │  [💾 파일로 저장]                        │
│  ████████░░░░ 65%         │                                          │
│  12:30/19:00 ETA: 2:15    │                                          │
│                           │                                          │
└───────────────────────────┴─────────────────────────────────────────┘
```

---

## 4. 에러 상황 흐름

```mermaid
flowchart TD
    A[변환 시작] --> B{파일 유효?}
    B -->|아니오| C[파일 없음 에러]
    C --> D[다른 파일 선택]
    D --> A
    
    B -->|예| E{모델 로딩 성공?}
    E -->|아니오| F[모델 다운로드 필요]
    F --> G[자동 다운로드]
    G --> E
    
    E -->|예| H[변환 진행]
    H --> I{사용자 중단?}
    I -->|예| J[현재까지 저장]
    I -->|아니오| K{변환 완료?}
    
    K -->|아니오| H
    K -->|예| L[성공]
    J --> M[부분 결과 확인]
```

---

## 5. 출력 파일 구조

```
mp3/
├── audio.mp3                 # 원본 오디오
├── audio_full.md             # 전체 텍스트
├── audio_time.md             # 시간대별 텍스트
└── log/
    └── 2026-01-11.md         # 일자별 변환 로그
```

---

*문서 버전: 1.0*
*최종 수정: 2026-01-11*
