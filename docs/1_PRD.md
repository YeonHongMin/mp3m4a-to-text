# 📋 PRD - Product Requirements Document
## MP3 to Text Converter

---

## 1. 제품 개요

### 1.1 제품명
**MP3 to Text Converter** (음성-텍스트 변환기)

### 1.2 제품 설명
로컬 환경에서 실행되는 무료 음성-텍스트 변환 도구입니다. OpenAI Whisper 모델(faster-whisper)을 활용하여 MP3, WAV, M4A, ASF 등의 오디오 파일을 한국어 텍스트로 변환합니다.

### 1.3 목표 사용자
- 라디오 방송 아카이빙 담당자
- 팟캐스트 제작자
- 회의록 작성이 필요한 직장인
- 인터뷰 녹취가 필요한 기자/연구자

---

## 2. 핵심 기능

### 2.1 오디오 변환
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| MP3/WAV/M4A/ASF 변환 | 다양한 오디오 파일을 텍스트로 변환 | P0 |
| 한국어 최적화 | 한국어 음성 인식 정확도 향상 | P0 |
| 타임스탬프 | 시간대별 텍스트 구분 | P1 |
| 배치 처리 | 여러 파일/디렉터리 일괄 변환 | P0 |
| 깊은 디렉터리 지원 | 중첩된 하위 디렉터리 자동 탐색 | P1 |

### 2.2 출력 형식
| 형식 | 설명 | 우선순위 |
|------|------|----------|
| 전체 텍스트 (_full.md) | 마침표 단위 줄바꿈 | P0 |
| 시간 구간 (_time.md) | 타임스탬프 포함 테이블 | P0 |
| 로그 (log/*.md) | 변환 이력 기록 | P1 |

### 2.3 사용자 인터페이스
| 인터페이스 | 설명 | 우선순위 |
|------------|------|----------|
| CLI | 명령줄 인터페이스 (argparse) | P0 |
| GUI (Gradio) | 웹 기반 GUI (port 7860) | P0 |
| Web UI (Flask) | 실시간 모니터링 웹 UI (port 5001) | P1 |
| GUI (Tkinter) | 네이티브 데스크톱 GUI | P1 |
| Batch Script | convert_all.sh 일괄 변환 | P0 |
| Python API | 프로그래밍 인터페이스 | P2 |

### 2.4 환각(Hallucination) 필터링
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 실시간 필터링 | 변환 중 환각 패턴 자동 제거 | P0 |
| 후처리 필터링 | 변환 후 반복 패턴 자동 제거 | P0 |
| 수동 후처리 | fix_hallucination.py 도구 | P1 |

### 2.5 BGM 모드
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 배경음악 위 음성 추출 | 임계값 최적화로 BGM 환경 개선 | P0 |
| 모드 전환 | --no-bgm 옵션으로 일반 음성용 전환 | P1 |

---

## 3. 비기능 요구사항

### 3.1 성능
- 1시간 오디오 변환 시간: GPU 기준 10분 이내
- 메모리 사용량: 4GB 이하
- 모델 로딩 시간: 30초 이내

### 3.2 품질
- 한국어 음성 인식 정확도: 95% 이상 (명확한 발음 기준)
- 환각(hallucination) 필터링: 98% 이상

### 3.3 보안/개인정보
- 모든 처리는 로컬에서 수행 (외부 서버 전송 없음)
- 원본 오디오 파일 수정 없음

---

## 4. 제약 사항

### 4.1 기술적 제약
- Python 3.10+ 필수
- faster-whisper 라이브러리 의존
- CUDA GPU 권장 (CPU도 지원하나 느림)
- ffmpeg/ffprobe 권장 (전처리 및 오디오 길이 확인)

### 4.2 범위 제외
- 실시간 스트리밍 변환 (향후 고려)
- 다국어 동시 인식 (현재는 단일 언어)
- 화자 분리 (Speaker Diarization)

---

## 5. 성공 지표 (KPI)

| 지표 | 목표 |
|------|------|
| 변환 완료율 | 99% |
| 사용자 만족도 | 4.0/5.0 |
| 평균 처리 시간 | 오디오 길이의 20% 이하 (GPU) |

---

## 6. 릴리스 계획

### v1.0 (완료)
- [x] 기본 CLI 변환
- [x] Gradio GUI
- [x] 실시간 파일 저장
- [x] 환각 필터링 (실시간)

### v1.1 (완료)
- [x] GPU 가속 (CUDA 지원)
- [x] 배치 처리 스크립트 (convert_all.sh)
- [x] 깊은 depth 디렉터리 지원
- [x] BGM 모드 (배경음악 위 음성 추출)
- [x] 할루시네이션 후처리 자동화
- [x] fix_hallucination.py 수동 도구
- [x] Flask Web UI (실시간 모니터링)
- [x] Tkinter 네이티브 GUI
- [x] 새로운 CLI 옵션 (--context, --no-bgm, --no-clean, --device)

### v1.2 (예정)
- [ ] 화자 분리 (실험적)
- [ ] 웹 인터페이스 개선

---

*문서 버전: 1.2*
*최종 수정: 2026-01-21*
