# ğŸ¤– TASKS - AI ê°œë°œ íŒŒíŠ¸ë„ˆìš© í”„ë¡¬í”„íŠ¸ ì„¤ê³„ì„œ
## MP3 to Text Converter

---

## 1. í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸

### 1.1 í”„ë¡œì íŠ¸ ê°œìš”
```
í”„ë¡œì íŠ¸: MP3 to Text Converter
ëª©ì : ë¡œì»¬ í™˜ê²½ì—ì„œ ì˜¤ë””ì˜¤ íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
ê¸°ìˆ  ìŠ¤íƒ: Python, faster-whisper, Gradio, Flask, Tkinter, CUDA
ì£¼ìš” íŒŒì¼:
- src/mp3_to_text.py (í•µì‹¬ ë³€í™˜ ë¡œì§ + CLI)
- src/app_gui.py (Gradio GUI, port 7860)
- src/web_ui.py (Flask Web UI, port 5001)
- src/app_tkinter.py (Tkinter ë„¤ì´í‹°ë¸Œ GUI)
- src/fix_hallucination.py (í• ë£¨ì‹œë„¤ì´ì…˜ í›„ì²˜ë¦¬)
- convert_all.sh (ì¼ê´„ ë³€í™˜ ìŠ¤í¬ë¦½íŠ¸)
```

### 1.2 í˜„ì¬ ê¸°ëŠ¥
- âœ… CLI ë³€í™˜ (ë‹¨ì¼ íŒŒì¼, ë””ë ‰í„°ë¦¬)
- âœ… Gradio GUI (port 7860)
- âœ… Flask Web UI (port 5001, ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§)
- âœ… Tkinter ë„¤ì´í‹°ë¸Œ GUI
- âœ… ì‹¤ì‹œê°„ íŒŒì¼ ì €ì¥
- âœ… í™˜ê°(hallucination) í•„í„°ë§ (ì‹¤ì‹œê°„)
- âœ… í™˜ê° í›„ì²˜ë¦¬ ìë™í™” (_remove_hallucination)
- âœ… VAD ì˜µì…˜ (í™œì„±í™”/ë¹„í™œì„±í™”)
- âœ… BGM ëª¨ë“œ (ë°°ê²½ìŒì•… ìœ„ ìŒì„± ì¶”ì¶œ)
- âœ… ë¬¸ë§¥ ì°¸ì¡° ì˜µì…˜ (--context)
- âœ… CUDA GPU ê°€ì†
- âœ… ê¹Šì€ depth ë””ë ‰í„°ë¦¬ ì¼ê´„ ì²˜ë¦¬

---

## 2. ì‘ì—… í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿

### 2.1 ë²„ê·¸ ìˆ˜ì • ìš”ì²­
```
[ë²„ê·¸ ìˆ˜ì • ìš”ì²­]

í˜„ìƒ: {ë²„ê·¸ ì„¤ëª…}
ì¬í˜„ ë°©ë²•: {ì¬í˜„ ë‹¨ê³„}
ì˜ˆìƒ ë™ì‘: {ì •ìƒ ë™ì‘}
ì‹¤ì œ ë™ì‘: {í˜„ì¬ ë²„ê·¸ ë™ì‘}

ê´€ë ¨ íŒŒì¼: {íŒŒì¼ ê²½ë¡œ}
ê´€ë ¨ í•¨ìˆ˜: {í•¨ìˆ˜ëª…}
```

### 2.2 ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­
```
[ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­]

ê¸°ëŠ¥ëª…: {ê¸°ëŠ¥ ì´ë¦„}
ì„¤ëª…: {ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…}
ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤: {ì–¸ì œ, ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€}

ì…ë ¥: {ì…ë ¥ ë°ì´í„°/íŒŒë¼ë¯¸í„°}
ì¶œë ¥: {ì˜ˆìƒ ì¶œë ¥}

ìš°ì„ ìˆœìœ„: P0/P1/P2
```

### 2.3 ë¦¬íŒ©í† ë§ ìš”ì²­
```
[ë¦¬íŒ©í† ë§ ìš”ì²­]

ëŒ€ìƒ: {íŒŒì¼ ë˜ëŠ” í•¨ìˆ˜}
í˜„ì¬ ë¬¸ì œ: {ì½”ë“œ ìŠ¤ë©œ, ì¤‘ë³µ ë“±}
ê°œì„  ë°©í–¥: {ì›í•˜ëŠ” êµ¬ì¡°}

ì œì•½ ì¡°ê±´:
- ê¸°ì¡´ API í˜¸í™˜ì„± ìœ ì§€
- í…ŒìŠ¤íŠ¸ ì—†ì´ ë™ì‘ í™•ì¸
```

---

## 3. ìì£¼ ì‚¬ìš©í•˜ëŠ” ì‘ì—…

### 3.1 í™˜ê° íŒ¨í„´ ì¶”ê°€
```
í™˜ê° íŒ¨í„´ ì¶”ê°€ ìš”ì²­:

ìƒˆ íŒ¨í„´: "{ìƒˆë¡œìš´ í™˜ê° ë¬¸êµ¬}"
ìœ„ì¹˜: src/mp3_to_text.py > HALLUCINATION_PATTERNS

í˜„ì¬ íŒ¨í„´ ëª©ë¡ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.
```

### 3.2 CLI ì˜µì…˜ ì¶”ê°€
```
CLI ì˜µì…˜ ì¶”ê°€ ìš”ì²­:

ì˜µì…˜ëª…: --{option-name}
íƒ€ì…: {bool/str/int}
ê¸°ë³¸ê°’: {default}
ì„¤ëª…: {help í…ìŠ¤íŠ¸}

argparseì— ì¶”ê°€í•˜ê³ , í•´ë‹¹ ë¡œì§ì— ì—°ê²°í•´ì£¼ì„¸ìš”.
```

### 3.3 GUI ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •
```
GUI ìˆ˜ì • ìš”ì²­:

ëŒ€ìƒ: {ì»´í¬ë„ŒíŠ¸ëª…, ì˜ˆ: output_text}
ë³€ê²½: {lines ì¡°ì •, ìŠ¤íƒ€ì¼ ë³€ê²½ ë“±}
íŒŒì¼: src/app_gui.py (Gradio) / src/web_ui.py (Flask) / src/app_tkinter.py (Tkinter)
```

### 3.4 ì¼ê´„ ë³€í™˜ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •
```
convert_all.sh ìˆ˜ì • ìš”ì²­:

ë³€ê²½ ì‚¬í•­: {ì„¤ëª…}
ì˜ˆìƒ ì˜í–¥: {ì–´ë–¤ ë™ì‘ì´ ë°”ë€ŒëŠ”ì§€}
```

---

## 4. ì½”ë“œ ìŠ¤íƒ€ì¼ ì§€ì¹¨

### 4.1 Python ìŠ¤íƒ€ì¼
```python
# í•¨ìˆ˜ ì •ì˜
def function_name(param1: str, param2: int = 10) -> dict:
    """í•¨ìˆ˜ ì„¤ëª… (í•œ ì¤„).
    
    Args:
        param1: ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì„¤ëª…
        param2: ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì„¤ëª… (ê¸°ë³¸ê°’: 10)
        
    Returns:
        ë°˜í™˜ê°’ ì„¤ëª…
    """
    pass

# í´ë˜ìŠ¤ ì •ì˜
class ClassName:
    """í´ë˜ìŠ¤ ì„¤ëª…."""
    
    def __init__(self, ...):
        """ì´ˆê¸°í™”."""
        pass
```

### 4.2 ë„¤ì´ë° ê·œì¹™
| ëŒ€ìƒ | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| í•¨ìˆ˜ | snake_case | `transcribe_audio()` |
| í´ë˜ìŠ¤ | PascalCase | `MP3ToTextConverter` |
| ìƒìˆ˜ | UPPER_SNAKE | `HALLUCINATION_PATTERNS` |
| ë³€ìˆ˜ | snake_case | `audio_path` |
| íŒŒì¼ | snake_case | `mp3_to_text.py` |

---

## 5. í…ŒìŠ¤íŠ¸ ì§€ì¹¨

### 5.1 ìˆ˜ë™ í…ŒìŠ¤íŠ¸
```bash
# CLI ê¸°ë³¸ í…ŒìŠ¤íŠ¸
python src/mp3_to_text.py mp3/test.mp3

# CLI ë””ë ‰í„°ë¦¬ í…ŒìŠ¤íŠ¸
python src/mp3_to_text.py --dir mp3/test_folder/

# Gradio GUI í…ŒìŠ¤íŠ¸
python src/app_gui.py
# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:7860 ì ‘ì†

# Flask Web UI í…ŒìŠ¤íŠ¸
python src/web_ui.py
# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5001 ì ‘ì†

# Tkinter GUI í…ŒìŠ¤íŠ¸
python src/app_tkinter.py

# ì¼ê´„ ë³€í™˜ í…ŒìŠ¤íŠ¸
./convert_all.sh -y

# í• ë£¨ì‹œë„¤ì´ì…˜ í›„ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
python src/fix_hallucination.py mp3/test_time.md -v
```

### 5.2 í™•ì¸ í•­ëª©
- [ ] ì—ëŸ¬ ì—†ì´ ì‹¤í–‰ë˜ëŠ”ê°€?
- [ ] ì˜ˆìƒ ì¶œë ¥ íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ê°€?
- [ ] í™˜ê° ë¬¸êµ¬ê°€ í•„í„°ë§ë˜ëŠ”ê°€?
- [ ] ì§„í–‰ë¥ ì´ í‘œì‹œë˜ëŠ”ê°€?
- [ ] ì¤‘ë‹¨ ì‹œ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ”ê°€?
- [ ] ê¹Šì€ depth ë””ë ‰í„°ë¦¬ê°€ íƒìƒ‰ë˜ëŠ”ê°€?
- [ ] í• ë£¨ì‹œë„¤ì´ì…˜ í›„ì²˜ë¦¬ê°€ ìë™ ì‹¤í–‰ë˜ëŠ”ê°€?
- [ ] BGM ëª¨ë“œê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ê°€?

---

## 6. ì¼ë°˜ì ì¸ ì‘ë‹µ í˜•ì‹

### 6.1 ì½”ë“œ ìˆ˜ì • ì‹œ
```
{ìˆ˜ì • ë‚´ìš© ìš”ì•½}

ìˆ˜ì • íŒŒì¼: {íŒŒì¼ ê²½ë¡œ}
ìˆ˜ì • ë‚´ìš©:
1. {ë³€ê²½ 1}
2. {ë³€ê²½ 2}

ì‹¤í–‰ ë°©ë²•:
{í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´}
```

### 6.2 ì§ˆë¬¸ ì‘ë‹µ ì‹œ
```
{ê°„ë‹¨í•œ ë‹µë³€}

{ìƒì„¸ ì„¤ëª… (í•„ìš”ì‹œ)}

ì˜ˆì‹œ:
{ì½”ë“œ ë˜ëŠ” ëª…ë ¹ì–´}
```

---

## 7. ê¸ˆì§€ ì‚¬í•­

1. **ì›ë³¸ ì˜¤ë””ì˜¤ íŒŒì¼ ìˆ˜ì • ê¸ˆì§€**
2. **ì™¸ë¶€ API í˜¸ì¶œ ê¸ˆì§€** (ëª¨ë“  ì²˜ë¦¬ëŠ” ë¡œì»¬)
3. **ê¸°ì¡´ CLI í˜¸í™˜ì„± ê¹¨ëœ¨ë¦¬ê¸° ê¸ˆì§€**
4. **.gitignoreì— ìˆëŠ” íŒŒì¼ ì¶”ì  ê¸ˆì§€**
5. **ì‚¬ìš©ì ìŠ¹ì¸ ì—†ì´ ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§ ê¸ˆì§€**

---

## 8. ìœ ìš©í•œ ì»¨í…ìŠ¤íŠ¸

### 8.1 í™˜ê° í•„í„°ë§ ìœ„ì¹˜
```python
# src/mp3_to_text.py
HALLUCINATION_PATTERNS = [
    "í•œê¸€ìë§‰", "ìë§‰ ì œì‘", "ìë§‰ by", "ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤", 
    "ì‹œì²­í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤", "êµ¬ë…ê³¼ ì¢‹ì•„ìš”", 
    "ì˜ìƒ í¸ì§‘", "ì œì‘ ì§€ì›", "ë²ˆì—­ :", "ì‹±í¬ :", "ë°°ê¸‰ :",
    "í•œê¸€ ìë§‰", "by í•œíš¨ì •", "í•œê¸€ìë§‰ by í•œíš¨ì •", "ì•„ë©˜",
    "ì´ ì‹œê° ì„¸ê³„ì˜€ìŠµë‹ˆë‹¤", "ë ë", "ë‹¤ìŒ ì˜ìƒì—ì„œ ë§Œë‚˜ìš”",
    "ë‹¤ìŒ ì£¼ì— ë§Œë‚˜ìš”", "ë‹¤ìŒ ì‹œê°„ì— ëµ™ê² ìŠµë‹ˆë‹¤"
]

def is_hallucination(self, text: str) -> bool:
    ...
```

### 8.2 í• ë£¨ì‹œë„¤ì´ì…˜ í›„ì²˜ë¦¬ ìœ„ì¹˜
```python
# src/mp3_to_text.py
def _remove_hallucination(self, time_file: str) -> int:
    """time.md íŒŒì¼ì—ì„œ ë°˜ë³µ íŒ¨í„´ ìë™ ì œê±°"""
    ...
```

### 8.3 BGM ëª¨ë“œ ì„¤ì • ìœ„ì¹˜
```python
# src/mp3_to_text.py, _transcribe_generator ë©”ì„œë“œ
if bgm_mode:
    no_speech_threshold = 0.2
    log_prob_threshold = -1.5
    hallucination_silence_threshold = 0.3
    vad_threshold = 0.35
    vad_min_speech_duration_ms = 200
    vad_min_silence_duration_ms = 1000
```

### 8.4 ì¼ê´„ ë³€í™˜ ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜
```bash
# convert_all.sh
# ê¹Šì€ depth ë””ë ‰í„°ë¦¬ íƒìƒ‰
mapfile -t SUBDIRS < <(find "$MP3_DIR" -type f \
    \( -name "*.mp3" -o -name "*.wav" -o -name "*.m4a" -o -name "*.asf" \) \
    -printf '%h\n' 2>/dev/null | sort -u)
```

### 8.5 GUI ë ˆì´ì•„ì›ƒ ìœ„ì¹˜
```python
# src/app_gui.py - Gradio
# CSS ë° Gradio ì»´í¬ë„ŒíŠ¸ ì •ì˜

# src/web_ui.py - Flask
# HTML_TEMPLATE ë³€ìˆ˜ì— ì „ì²´ UI ì •ì˜

# src/app_tkinter.py - Tkinter
# setup_ui() ë©”ì„œë“œì— UI ì •ì˜
```

### 8.6 CLI ì˜µì…˜ ì „ì²´ ëª©ë¡
```python
# src/mp3_to_text.py, main() í•¨ìˆ˜
parser.add_argument("-o", "--output")           # ì¶œë ¥ íŒŒì¼
parser.add_argument("-m", "--model")            # ëª¨ë¸ í¬ê¸°
parser.add_argument("-l", "--language")         # ì–¸ì–´ ì½”ë“œ
parser.add_argument("--device")                 # ì‹¤í–‰ ì¥ì¹˜
parser.add_argument("-t", "--timestamps")       # íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ
parser.add_argument("--dual")                   # ë“€ì–¼ ì¶œë ¥
parser.add_argument("--interval")               # ì‹œê°„ êµ¬ê°„
parser.add_argument("--vad")                    # VAD í™œì„±í™”
parser.add_argument("--context")                # ë¬¸ë§¥ ì°¸ì¡° í™œì„±í™”
parser.add_argument("--no-bgm")                 # BGM ëª¨ë“œ ë¹„í™œì„±í™”
parser.add_argument("--no-clean")               # í• ë£¨ì‹œë„¤ì´ì…˜ ìë™ ì œê±° ë¹„í™œì„±í™”
parser.add_argument("--dir")                    # ë””ë ‰í„°ë¦¬ ì¼ê´„ ë³€í™˜
```

---

*ë¬¸ì„œ ë²„ì „: 1.2*
*ìµœì¢… ìˆ˜ì •: 2026-01-21*
